{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst API_KEY = '36828323-5d4b30a68db3a86c330ff5a61';\nconst BASE_URL = 'https://pixabay.com/api/'\n\nexport async function fetchImages(query, currentPage) {\n\ttry {\n\t\tconst response = await axios.get(BASE_URL, {\n\t\t\tparams: {\n\t\t\t  key: API_KEY,\n\t\t\t  q: query,\n\t\t\t  image_type: 'photo',\n\t\t\t  orientation: 'horizontal',\n\t\t\t  safesearch: true,\n\t\t\t\tper_page: 40,\n\t\t\t\tpage: currentPage,\n\t\t  }\n\t  });\n\n\t\tif (response.data.hits.length === 0) {\n\t\t\tiziToast.error({\n\t\t\t\tmessage: \"Sorry, there are no images matching your search query. Please try again!\",\n\t\t\t\tposition: \"topRight\",\n\t\t\t});\n\t\t}\n\n\t\treturn {\n\t\t\tresult: response.data.hits,\n\t\t\ttotalHits: response.data.totalHits,\n\t\t}\n\t\t}\tcatch(error) {\n\t\tiziToast.error({\n\t\t\ttitle: \"Error\",\n\t\t\tmessage: \"Something went wrong. Try again later\",\n\t\t\tposition: \"topRight\",\n\t\t});\n\t\tconsole.error(\"Error: \", error)\n\t}\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nlet lightbox;\n\nexport function renderGallery(cards) {\n    return cards\n    .map(card => {\n    let {largeImageURL, webformatURL, tags, likes, views, comments, downloads} = card;\n    return `\n      <a href=\"${largeImageURL}\" class=\"photo-card\">\n        <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n        <div class=\"info\">\n          <p><strong>Likes:</strong> ${likes}</p>\n          <p><strong>Views:</strong> ${views}</p>\n          <p><strong>Comments:</strong> ${comments}</p>\n          <p><strong>Downloads:</strong> ${downloads}</p>\n        </div>\n      </a>\n    `;\n  })\n  .join('');\n\n}\n\nexport function initializeLightbox() {\n  if (lightbox) {\n    lightbox.refresh(); \n} else {\n    lightbox = new SimpleLightbox('.gallery a', {\n\t\t\tcaptionsData: 'alt', \n\t\t\tcaptionDelay: 150,   \n\t\t\tanimationSpeed: 200, \n\t\t\tcloseText: '×',      \n\t\t\tnavText: ['<', '>'],\n    });\n}\n}\n\n// варіант 2\n// function imageTemplate(card) {\n//   let {largeImageURL, webformatURL, tags, likes, views, comments, downloads} = card;\n//   return `\n//   <a href=\"${largeImageURL}\" class=\"photo-card\">\n//     <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n//     <div class=\"info\">\n//       <p><strong>Likes:</strong> ${likes}</p>\n//       <p><strong>Views:</strong> ${views}</p>\n//       <p><strong>Comments:</strong> ${comments}</p>\n//       <p><strong>Downloads:</strong> ${downloads}</p>\n//     </div>\n//   </a>\n//   `;\n// }\n// export function renderGallery(cards) {\n//   return cards.map(imageTemplate).join('')\n// }","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { fetchImages } from \"./js/pixabay-api\";\nimport { renderGallery, initializeLightbox } from \"./js/render-functions\";\n\nconst form = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader-wrapper');\nconst input = document.querySelector('.search-form input');\nconst loadMore = document.querySelector('.load-more')\n\nconst params = {\n\tquery: '',\n\tpage: 1,\n\ttotal: null,\n}\n\nform.addEventListener('submit', async (event) => {\n\tevent.preventDefault();\n\n\tparams.query = event.target.elements.searchQuery.value;\n\tparams.page = 1;\n\n\tif (!params.query) {\n\t\tiziToast.warning({\n\t\t\tmessage: \"Please enter a search query\",\n\t\t\tposition: \"topRight\",\n\t});\n\t\treturn;\n\t}\n\n\tgallery.innerHTML = '';\n\tshowElement(loader);\n\tinput.classList.add('active');\n\n\n  try {\n\t\tconst { result, totalHits } = await fetchImages(params.query, params.page);\n\n\t\tif (result.length === 0) {\n\t\t\tiziToast.info({\n\t\t\t\tmessage: \"Sorry, there are no images matching your search query\",\n\t\t\t\tposition: \"topRight\",\n\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tconst markup = renderGallery(result);\n\t\tgallery.innerHTML = markup;\n\t\tparams.total = totalHits;\n\n\t\tinitializeLightbox();\n\t\tcheckBtnLoadMoreStatus();\n\n\t} catch (error) {\n\t\tiziToast.error({\n\t\t\ttitle: \"Error\",\n\t\t\tmessage: \"Something went wrong. Please try again later.\",\n\t\t\tposition: \"topRight\",\n\t});\n\t\tconsole.error('Error', error);\n\t} finally {\n\t\tform.searchQuery.value = '';\n\t\thideElement(loader);\n\t\tinput.classList.remove('active');\n\t}\n});\n\nloadMore.addEventListener('click', async (event) => {\n\tshowElement(loader);\n\ttry {\n\t\thideElement(loadMore);\n\tparams.page += 1;\n\tconst { result } = await fetchImages(params.query, params.page);\n\tconst markup = renderGallery(result);\n\tgallery.insertAdjacentHTML('beforeend', markup);\n\tcheckBtnLoadMoreStatus();\n\n\tinitializeLightbox();\n\tscrollPage();\n\t} catch (error) {\n\t\tiziToast.error({\n\t\t\ttitle: \"Error\",\n\t\t\tmessage: \"Something went wrong. Please try again later.\",\n\t\t\tposition: \"topRight\",\n\t});\n\t\tconsole.error('Error', error);\n\t} finally {\n\t\thideElement(loader);\n\t}\n})\n\nfunction checkBtnLoadMoreStatus() {\n\tconst perPage = 40;\n\tconst maxPages = Math.ceil(params.total / perPage)\n\tif (params.page >= maxPages) {\n\t\thideElement(loadMore);\n\t\tiziToast.info({\n\t\t\tmessage: \"We're sorry, but you've reached the end of search results.\",\n\t\t\tposition: \"topRight\",\n\t\t})\n\t} else {\n\t\tshowElement(loadMore);\n\t}\n}\nfunction showElement(e) {\n\te.classList.remove('hidden');\n}\nfunction hideElement(e) {\n\te.classList.add('hidden');\n}\nfunction scrollPage() {\n\tconst info = gallery.firstElementChild.getBoundingClientRect();\n\tconst height = info.height * 2;\n\twindow.scrollBy({\n\t\tbehavior: 'smooth',\n\t\ttop: height,\n\t})\n}"],"names":["API_KEY","BASE_URL","fetchImages","query","currentPage","response","axios","iziToast","error","lightbox","renderGallery","cards","card","largeImageURL","webformatURL","tags","likes","views","comments","downloads","initializeLightbox","SimpleLightbox","form","gallery","loader","input","loadMore","params","event","showElement","result","totalHits","markup","checkBtnLoadMoreStatus","hideElement","scrollPage","maxPages","e","height"],"mappings":"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"}